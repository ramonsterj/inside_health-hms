# Commit Changes

Create a conventional commit with all current changes.

## Steps

1. Run `git status` to see all changes
   - If no changes exist, inform the user and stop
2. Check if currently on a protected branch (main, master, develop)
   - Run `git branch --show-current` to get the current branch
   - If on a protected branch:
     a. Run `git diff` to understand the changes
     b. Propose a branch name following the pattern: `type/short-description` (e.g., `feat/add-user-auth`, `fix/login-validation`)
     c. Present the branch name to the user for approval
     d. Create and switch to the new branch with `git checkout -b <branch-name>`
3. Run `git diff` to review the changes
4. Analyze the changes and determine the appropriate conventional commit type:

   **Type:**
   - `feat:` for new features
   - `fix:` for bug fixes
   - `docs:` for documentation changes
   - `style:` for formatting changes
   - `refactor:` for code refactoring
   - `test:` for test additions/changes
   - `chore:` for maintenance tasks
   - `perf:` for performance improvements
   - `ci:` for CI/CD changes

   **Scope (optional):**
   - `(api)` - backend changes
   - `(web)` - frontend changes
   - `(db)` - Flyway migrations
   - `(auth)` - authentication/security (spans api/web)
   - `(i18n)` - internationalization (spans api/web)
   - `(deps)` - dependency updates
   - `(build)` - Gradle, Vite, CI/CD, lefthook

   **Breaking Changes:**
   - Append ! after type/scope for breaking changes, e.g., feat(api)!: change auth flow

5. Stage all changes with `git add -A`
6. Draft a descriptive commit message following the format:
   ```
   type(scope): brief description

   Optional longer explanation of what changed and why.
   ```
7. Present the commit message to the user for approval. This is a MUST!
8. Create the commit with the approved message

## Notes

- This project follows Conventional Commits specification
- Do NOT add co-authors to commit messages
- Do NOT add "generated by Claude Code" to commit messages
- Focus on "why" rather than "what" in descriptions
- Keep the first line under 72 characters
- Use present tense ("add feature" not "added feature")
- When changes span multiple areas, either omit scope or use the primary area
